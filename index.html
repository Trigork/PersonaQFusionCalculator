
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">
        <link rel="icon" type="image/png" href="favicon.png">

        <title>Persona Q Fusions</title>

        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/application.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>

    <body>

        <div id="bg-bar">
            <div class="bg-bar-top"></div>
            <div class="bg-bar-left"></div>
            <div class="bg-bar-right"></div>
        </div>  
      
        <nav id="navbar-persona" class="navbar navbar-default navbar-inverse navbar-fixed-top">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    
                    <a class="navbar-brand" href="#">Persona Q Fusion Calculator</a>
                </div>
                
                <div id="navbar" class="collapse navbar-collapse">
                    <ul class="nav navbar-nav">
                        <li>
                            <a href="#" onclick="activateSearch();">
                            <span class="glyphicon glyphicon-search" aria-hidden="true"></span> Search</a>
                        </li>
                        <li>
                            <a href="#" onclick="activateIngredients();">
                            <span class="glyphicon glyphicon-search" aria-hidden="true"></span> Ingredients</a>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                                <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span> Arcana <span class="caret"></span></a>
                            <ul id="arcana-navbar" class="dropdown-menu" role="menu">
                                <li>loading...</li>
                            </ul>
                        </li>
                        <li><a href="#" onclick="activatePersonas();"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> Personas</a></li>
                    </ul>
                </div>
        
            </div>
        </nav>
    
        <div class="container">
            
            <div id="personaQ">
                <div id="select" class="panel panel-primary">
                    <div class="panel-body">Loading...</div>
                </div>
            
                <div id="fusion-result">
                </div>
            </div>

        </div>
           
        <div class="modal fade bs-example-modal-sm" id="skill-modal" tabindex="-1" role="dialog" aria-labelledby="skill-modal-label" aria-hidden="true" >
            <div class="modal-dialog">
                <div id="skill-modal-content" class="modal-content panel panel-info">
                </div>
            </div>
        </div>
        
        <script src="js/persona-q.json"></script>
        <script src="js/persona-q-skills.json"></script>
        <script src="js/jquery-1.11.2.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/application.js"></script>
        <script src="js/handlebars-v2.0.0.js"></script>
    
        <script type="text/javascript">

            $(document).ready(function() {
                compileTemplates();
                registerHelpers();
                registerPartials();

                $(document).on('click','.navbar-collapse.in',function(e) {
                    if( $(e.target).is('a') && $(e.target).attr('class') != 'dropdown-toggle' ) {
                        $(this).collapse('hide');
                    }
                });
                                    
                $("#arcana-navbar").empty();
                $.each(personaQ["arcana"].sort(), function(i) {
                    $("#arcana-navbar").append($("<li/>").append($('<a href="#" onclick="activateArcana(\'' + i + '\');"/>').text(this)));
                });
                    
                activateSearch();
            });

            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-56676469-1', 'auto');
            ga('send', 'pageview');

        </script>
        
        <!-- BEGIN Persona list group Template -->
        <script id="persona-list" type="text/x-handlebars-template">
            <ul class="list-group">
                <li class="row list-group-item active">
                    <div class="row">
                        <div class="col-xs-4 col-md-6">
                            {{#if title}}
                                <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span> <span class="hidden-xs">Arcana: </span>{{arcana}}
                            {{/if}}
                        </div>
                        <div class="col-xs-1">Lvl</div>
                        <div class="col-xs-1">HP</div>
                        <div class="col-xs-1">SP</div>
                    </div>
                </li>
                
                {{#each personas}}
                    {{> persona-list-item}}
                {{/each}}
            </ul>
        </script>
        <!-- END Persona list group Template -->
        
        <!-- BEGIN Persona list item partial Template -->
        <script id="persona-list-item-partial" type="text/x-handlebars-template">
             <li class="row list-group-item{{#ifEq @root.active name}} list-group-item-info{{/ifEq}}">
                <div class="col-xs-4 col-md-6">{{name}}</div>
                <div class="col-xs-1">{{level}}</div>
                <div class="col-xs-1">{{hp}}</div>
                <div class="col-xs-1">{{sp}}</div>
                        
                <div class="col-xs-3 text-right">
                    <div class="dropdown">
                        <button class="btn btn-primary btn-xs" data-toggle="dropdown" aria-expanded="false">
                            <span class="glyphicon glyphicon-fire" aria-hidden="true"></span> Skills <li class="caret"></li>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-right" role="menu">
                            {{#eachSortedSkills skills}}
                                {{#each this}}
                                    <li><a href="#" onclick="showSkillModal('{{this.name}}');"><abbr title="{{this.description}}">{{this.name}}</abbr></a></li>
                                {{/each}}
                            {{/eachSortedSkills}}
                        </ul>
                    </div>
                </div>
            </li>
        </script>
        <!-- END Persona list item partial Template -->
        
        <!-- BEGIN Search Controls Template -->
        <script id="search-controls" type="text/x-handlebars-template">
            <div class="panel-heading">
                <h3 class="panel-title">
                    <span class="glyphicon glyphicon-search" aria-hidden="true"/> Search
                </h3>
            </div>
            
            <div class="panel-body">
                <p class="exclaim bg-info text-info">
                    <strong>
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"/> {{exclaim}}
                    </strong>
                </p>
                
                <div class="row">
                    <div id="p1" class="form-group col-md-4">
                        <label for="persona1"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> Persona 1</label>
                        <select id="persona1" class="form-control">
                            {{#eachSortedPersonas}}
                                {{#each this}}
                                    <option value="{{name}}">{{name}}</option>
                                {{/each}}
                            {{/eachSortedPersonas}}
                        </select>
                    </div>
                    
                    <div id="p1" class="form-group col-md-4">
                        <label for="persona2"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> Persona 2</label>
                        <select id="persona2" class="form-control">
                            {{#eachSortedPersonas}}
                                {{#each this}}
                                    <option value="{{name}}">{{name}}</option>
                                {{/each}}
                            {{/eachSortedPersonas}}
                        </select>
                    </div>

                    <div id="p1" class="form-group col-md-4">
                        <label for="persona3"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> Persona 3</label>
                        <select id="persona3" class="form-control">
                            <option value="">NONE</option>
                            {{#eachSortedPersonas}}
                                {{#each this}}
                                    <option value="{{name}}">{{name}}</option>
                                {{/each}}
                            {{/eachSortedPersonas}}
                        </select>
                    </div>

                </div>    
            </div>
            
            {{> credits}}
            
        </script>
        <!-- END Search Controls Template -->
        
         <!-- BEGIN Accordion Persona List Template -->
        <script id="accordion-persona-list" type="text/x-handlebars-template">
            <div class="panel-heading">
                <h3 class="panel-title">
                    <span class="glyphicon glyphicon-user" aria-hidden="true"></span> Persona List
                </h3>
            </div>
            
            <div class="panel-body">
                <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                    {{#each letters}}
                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="tab-{{@key}}">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" data-parent="#accordion" href="#collapse{{@key}}" aria-controls="collapse{{@key}}">
                                        {{@key}}</a>
                                </h4>
                            </div>
                            <div id="collapse{{@key}}" class="panel-collapse collapse" role="tabpanel" aria-labelleyby="tab-{{@key}}">
                                <ul id="personas{{@key}}" class="panel-body list-group">
                                    {{#each this}}
                                        {{> persona-list-item }}    
                                    {{/each}}
                                </ul>
                            </div>
                        </div>
                    {{/each}}
                </div>
            </div>
            
            {{> credits}}

        </script>
        <!-- END Accordion Persona List Template -->

        <!-- BEGIN Credits partial Template -->
        <script id="credits-partial" type="text/x-handlebars-template">
            <div class="credits panel-footer text-right">
                <div id="" class="text-right">
                    <span>
                        <small>
                            <ol class="breadcrumb">
                                <li><a href="https://github.com/amarriner/PersonaQFusionCalculator">v0.5</a></li>
                                <li>by <a href="https://twitter.com/amarriner">@amarriner</a></li>
                                <li>Data based on 
                                    <a href="http://www.gamefaqs.com/3ds/739685-persona-q-shadow-of-the-labyrinth/faqs/70843">this FAQ</a> by
                                    <a href="http://www.gamefaqs.com/users/silentsword/contributions">Silentsword</a>
                                </li>
                            </ol>
                        </small>
                    </span>
                </div>
            </div>
        </script>
        <!-- END Credits partial Template -->
        
        <!-- BEGIN Arcana list Template -->
        <script id="arcana-list" type="text/x-handlebars-template">
            <div class="panel-heading">
                <h3 class="panel-title">
                    <span class="glyphicon glyphicon-eye-open" aria-hidden="true"/> {{arcana}}
                </h3>
            </div>
            
            <div id="arcana-list" class="panel-body">
                <ul class="list-group">
                    {{#each personas}}
                        {{> persona-list-item}}
                    {{/each}}
                </ul>
            </div>
            
            {{> credits}}
        </script>
        <!-- END Arcana list Template -->
    
        <!-- BEGIN Ingredients Controls Template -->
        <script id="ingredients-controls" type="text/x-handlebars-template">
            <div class="panel-heading">
                <h3 class="panel-title">
                    <span class="glyphicon glyphicon-search" aria-hidden="true"/> Ingredients
                </h3>
            </div>
            
            <div class="panel-body">
                <p class="exclaim bg-info text-info">
                    <strong>
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"/> {{exclaim}}
                    </strong>
                </p>
                
                <div class="row">
                    <div id="f-top" class="form-group col-md-12">
                        <label for="fused"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> Persona</label>
                        <select id="fused" class="form-control">
                             {{#eachSortedPersonas}}
                                {{#each this}}
                                    <option value="{{name}}">{{name}}</option>
                                {{/each}}
                            {{/eachSortedPersonas}}
                        </select>
                    </div>
                </div>
                
                <div class="row text-center">
                    <strong class="text-info">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> 
                        This function is very much a work in progress!
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                    </strong>
                </div>
            </div>
            
            {{> credits}}
        </script>
        <!-- END Ingredients Template -->
        
        <!-- BEGIN Ingredients List Template -->
        <script id="ingredients-list" type="text/x-handlebars-template">
            <ul class="list-group">
                <li class="row list-group-item active">
                    <div class="row">
                        <div class="col-xs-12">
                            <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span> 
                            <span class="hidden-xs">Arcana: </span>
                            {{arcana}}
                        </div>
                    </div>
                </li>
                {{#each results}}
                    <li class="row list-group-item">
                        <div class="col-md-6">{{getArcanaName this.arcana.[0]}}</div>
                        <div class="col-md-6">{{getArcanaName this.arcana.[1]}}</div>
                    </li>
                {{/each}}
            </ul>
        </script>
        <!-- END Ingredients List Template -->
        
        <!-- BEGIN Skill Details Template -->
        <script id="skill-details" type="text/x-handlebars-template">
            <div class="modal-header panel-heading">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>    
                <h4 class="modal-title text-uppercase" id="skill-modal-label">
                    <span class="glyphicon glyphicon-fire" aria-hidden="true"></span> {{skill.name}}
                </h4>
            </div>
                
            <div id="skill-modal-body" class="modal-body panel-body">
                <div class="row">
                    <div class="col-xs-1 text-info"><strong>Type</strong></div>
                    <div class="col-xs-9">{{skill.type}}</div>
                </div>

                {{#if skill.range}}
                <div class="row">
                    <div class="col-xs-1 text-info"><strong>Range</strong></div>
                    <div class="col-xs-9">{{skill.range}}</div>
                </div>
                {{/if}}
                
                {{#if skill.cost}}
                <div class="row">
                    <div class="col-xs-1 text-info"><strong>Cost</strong></div>
                    <div class="col-xs-9">{{skill.cost}}</div>
                </div>
                {{/if}}
            </div>
            
            <div id="skill-modal-footer" class="modal-footer panel-footer">
                <p>
                    <em>{{skill.description}}</em>
                </p>
            </div>
        </script>
        <!-- END Skill Details Template -->
        
    </body>
</html>

